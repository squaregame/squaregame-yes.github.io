<!DOCTYPE html>
<html>
<head>
	<title>Loading</title>
	<meta http-equiv="refresh" content="15;url=ready.html">
    <style>
    body {
    /*font-family: sans-serif;*/
    display: grid;
    height: 100vh;
    place-items: center;
    font-family: 'Helvetica', sans-serif;
    text-align: center;
    }

    .base-timer {
    position: relative;
    width: 300px;
    height: 200px;
    }

    .base-timer__svg {
    transform: scaleX(-1);
    }

    .base-timer__circle {
    fill: none;
    stroke: none;
    }

    .base-timer__path-elapsed {
    stroke-width: 7px;
    stroke: grey;
    }

    .base-timer__path-remaining {
    stroke-width: 7px;
    stroke-linecap: round;
    transform: rotate(90deg);
    transform-origin: center;
    transition: 1s linear all;
    fill-rule: nonzero;
    stroke: currentColor;
    }

    .base-timer__path-remaining.green {
    color: rgb(65, 184, 131);
    }

    .base-timer__path-remaining.orange {
    color: orange;
    }

    .base-timer__path-remaining.red {
    color: red;
    }

    .base-timer__label {
    position: absolute;
    width: 300px;
    height: 300px;
    top: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 48px;
    }
    </style>
</head>
<body>
	<audio id="clock-ticking" src="clock-ticking.mp3" loop="loop"></audio>
    <div id="app"></div>
	<h1>Memorize the pattern you rolled</h1>

<script>
    // Credit: Mateusz Rybczonec
	window.onload = function() { 
		document.getElementById("clock-ticking").play();
		audio.volume = 0.75 
	}
const FULL_DASH_ARRAY = 283;
const WARNING_THRESHOLD = 10;
const ALERT_THRESHOLD = 5;

const COLOR_CODES = {
  info: {
    color: "green"
  },
  warning: {
    color: "orange",
    threshold: WARNING_THRESHOLD
  },
  alert: {
    color: "red",
    threshold: ALERT_THRESHOLD
  }
};

const TIME_LIMIT = 15;
let timePassed = 0;
let timeLeft = TIME_LIMIT;
let timerInterval = null;
let remainingPathColor = COLOR_CODES.info.color;

document.getElementById("app").innerHTML = `
<div class="base-timer">
  <svg class="base-timer__svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
    <g class="base-timer__circle">
      <circle class="base-timer__path-elapsed" cx="50" cy="50" r="45"></circle>
      <path
        id="base-timer-path-remaining"
        stroke-dasharray="283"
        class="base-timer__path-remaining ${remainingPathColor}"
        d="
          M 50, 50
          m -45, 0
          a 45,45 0 1,0 90,0
          a 45,45 0 1,0 -90,0
        "
      ></path>
    </g>
  </svg>
  <span id="base-timer-label" class="base-timer__label">${formatTime(
    timeLeft
  )}</span>
</div>
`;

startTimer();

function onTimesUp() {
  clearInterval(timerInterval);
}

function startTimer() {
  timerInterval = setInterval(() => {
    timePassed = timePassed += 1;
    timeLeft = TIME_LIMIT - timePassed;
    document.getElementById("base-timer-label").innerHTML = formatTime(
      timeLeft
    );
    setCircleDasharray();
    setRemainingPathColor(timeLeft);

    if (timeLeft === 0) {
      onTimesUp();
    }
  }, 1000);
}

function formatTime(time) {
  const minutes = Math.floor(time / 60);
  let seconds = time % 60;

  if (seconds < 10) {
    seconds = `0${seconds}`;
  }

  return `${minutes}:${seconds}`;
}

function setRemainingPathColor(timeLeft) {
  const { alert, warning, info } = COLOR_CODES;
  if (timeLeft <= alert.threshold) {
    document
      .getElementById("base-timer-path-remaining")
      .classList.remove(warning.color);
    document
      .getElementById("base-timer-path-remaining")
      .classList.add(alert.color);
  } else if (timeLeft <= warning.threshold) {
    document
      .getElementById("base-timer-path-remaining")
      .classList.remove(info.color);
    document
      .getElementById("base-timer-path-remaining")
      .classList.add(warning.color);
  }
}

function calculateTimeFraction() {
  const rawTimeFraction = timeLeft / TIME_LIMIT;
  return rawTimeFraction - (1 / TIME_LIMIT) * (1 - rawTimeFraction);
}

function setCircleDasharray() {
  const circleDasharray = `${(
    calculateTimeFraction() * FULL_DASH_ARRAY
  ).toFixed(0)} 283`;
  document
    .getElementById("base-timer-path-remaining")
    .setAttribute("stroke-dasharray", circleDasharray);
}

// options
		// Get the value of the 'option' parameter from the URL
		const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		const option = urlParams.get('option');
		
		// Redirect to the appropriate page based on the 'option' value
		switch(option) {
			case '1':
				window.setTimeout(function(){
				    location.href='ready.html?option=1';
				}, 15000);
				break;
			case '2':
				window.setTimeout(function(){
				    location.href='ready.html?option=2';
				}, 15000);
				break;
			case '3':
				window.setTimeout(function(){
				    location.href='ready.html?option=3';
				}, 15000);
				break;
            case '4':
				window.setTimeout(function(){
				    location.href='ready.html?option=4';
				}, 15000);
				break;
            case '5':
				window.setTimeout(function(){
				    location.href='ready.html?option=5';
				}, 15000);
				break;
        // adding additional patterns
            case '6':
				window.setTimeout(function(){
				    location.href='ready.html?option=6';
				}, 15000);
				break;
            case '7':
				window.setTimeout(function(){
				    location.href='ready.html?option=7';
				}, 15000);
				break;
            case '8':
				window.setTimeout(function(){
				    location.href='ready.html?option=8';
				}, 15000);
				break;
            case '9':
				window.setTimeout(function(){
				    location.href='ready.html?option=9';
				}, 15000);
				break;
        case '10':
				window.setTimeout(function(){
				    location.href='ready.html?option=10';
				}, 15000);
				break;
        

        case '11':
				window.setTimeout(function(){
				    location.href='ready.html?option=11';
				}, 15000);
				break;
			case '12':
				window.setTimeout(function(){
				    location.href='ready.html?option=12';
				}, 15000);
				break;
			case '13':
				window.setTimeout(function(){
				    location.href='ready.html?option=13';
				}, 15000);
				break;
            case '14':
				window.setTimeout(function(){
				    location.href='ready.html?option=14';
				}, 15000);
				break;
            case '15':
				window.setTimeout(function(){
				    location.href='ready.html?option=15';
				}, 15000);
				break;
        // adding additional patterns
            case '16':
				window.setTimeout(function(){
				    location.href='ready.html?option=16';
				}, 15000);
				break;
            case '17':
				window.setTimeout(function(){
				    location.href='ready.html?option=17';
				}, 15000);
				break;
            case '18':
				window.setTimeout(function(){
				    location.href='ready.html?option=18';
				}, 15000);
				break;
            case '19':
				window.setTimeout(function(){
				    location.href='ready.html?option=19';
				}, 15000);
				break;
        case '20':
				window.setTimeout(function(){
				    location.href='ready.html?option=20';
				}, 15000);
				break;  



        case '21':
				window.setTimeout(function(){
				    location.href='ready.html?option=21';
				}, 15000);
				break;
			case '22':
				window.setTimeout(function(){
				    location.href='ready.html?option=22';
				}, 15000);
				break;
			case '23':
				window.setTimeout(function(){
				    location.href='ready.html?option=23';
				}, 15000);
				break;
            case '24':
				window.setTimeout(function(){
				    location.href='ready.html?option=24';
				}, 15000);
				break;
            case '25':
				window.setTimeout(function(){
				    location.href='ready.html?option=25';
				}, 15000);
				break;
        // adding additional patterns
            case '26':
				window.setTimeout(function(){
				    location.href='ready.html?option=26';
				}, 15000);
				break;
            case '27':
				window.setTimeout(function(){
				    location.href='ready.html?option=27';
				}, 15000);
				break;
            case '28':
				window.setTimeout(function(){
				    location.href='ready.html?option=28';
				}, 15000);
				break;
            case '29':
				window.setTimeout(function(){
				    location.href='ready.html?option=29';
				}, 15000);
				break;
        case '30':
				window.setTimeout(function(){
				    location.href='ready.html?option=30';
				}, 15000);
				break;


        case '31':
				window.setTimeout(function(){
				    location.href='ready.html?option=31';
				}, 15000);
				break;
			case '32':
				window.setTimeout(function(){
				    location.href='ready.html?option=32';
				}, 15000);
				break;
			case '33':
				window.setTimeout(function(){
				    location.href='ready.html?option=33';
				}, 15000);
				break;
            case '34':
				window.setTimeout(function(){
				    location.href='ready.html?option=34';
				}, 15000);
				break;
            case '35':
				window.setTimeout(function(){
				    location.href='ready.html?option=35';
				}, 15000);
				break;



			default:
				// Redirect to a default page if the 'option' value is invalid
				window.setTimeout(function(){
				    location.href='MenuScreen.html';
				}, 15000);
				break;
		}
	</script>
</body>
</html>




</script>

</body>
</html>
